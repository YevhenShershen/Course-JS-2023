<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Calculator</title>
  </head>
  <body>
<h1>Flyweight patterns</h1>
<ul>

</ul>
  </body>
  <script>

    //181. Wzorzec Flyweight

/*
    Flyweight-Pyłek
Pyłek ma na celu zaoszczędzenie pamięci w przypadu powtarzających się obiektów w dużych
zbiorach np w sklepach internetowych

W przypadu np laptopów wiele ich wariantów modelu procesora, taktowania, pamięci itd się
powtarza przez co wiele modeli może współdzielić referencję do tego samego obiektu zamiast
tworzyć za każadym razem nowy.
*/

function Flyweight(brand, cpu, ram){
  this.brand = brand;
  this.cpu = cpu;
  this.ram= ram;
}

function Computer(brand, cpu, speed, ram, modelId){
  this.flyweights = FlyweightFactory.get(brand, cpu, ram);
  this.speed = speed;
  this.modelId = modelId
}

const FlyweightFactory = (function(){
  let flyweights = {};
  return{
    get: function(brand, cpu, ram){
      let propName = `${brand}_${cpu}_${ram}`;
      if(!flyweights[propName]){//sprawdza czy mamy jyż takie same brand, cpu, ram w naszej tabeli
        flyweights[propName] = new Flyweight(brand, cpu, ram)
      }
      return flyweights[propName]
    },

    count:function(){
      let count = 0;
      for(let el in flyweights)
      count++
      return count
    }
  }
})()

let arr = []
arr.push(new Computer("Dell", "Intel", "3Ghz","16Gb", "XYZ123"))
arr.push(new Computer("Dell", "Intel", "3Ghz","16Gb", "XYDS23"))
arr.push(new Computer("Dell", "Intel", "6Ghz","16Gb", "XY3223"))
arr.push(new Computer("Dell", "Intel", "2Ghz","32Gb", "XYZ3333"))
arr.push(new Computer("Dell", "Intel", "1Ghz","132Gb", "XYZ123"))
arr.push(new Computer("Dell", "Intel", "1Ghz","132Gb", "XYZ123"))
console.log(arr)
console.log(FlyweightFactory.count())



  </script>
</html>
